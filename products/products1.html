<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>商品頁面|Funny桌遊</title>

  <link rel="stylesheet" href="../css/bootstrap.min.css" />
  <script src="../js/popper.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      background-image: url("../images/background-2.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }

    .social-icon i {
      font-size: 28px;
      margin: 10px;
      color: black;
    }

    .social-icon i:hover {
      color: lightgray;
    }

    .footer-social-icon i {
      margin: 0 5px;
      font-size: 28px;
    }

    .nav-item {
      margin: 20px;
    }
    .navbar.navbar-primary {
        max-height: 500px;
        z-index: 2;
      }
    .logo {
      font-weight: 800;
      font-size: 1.5rem;
      color: rgb(8, 57, 149);
    }
    .fa-facebook:hover {
      color: #4267b2;
    }
    .fa-instagram:hover {
      color: #e1306c;
    }
    .fa-youtube:hover {
      color: #ff0000;
    }
    .fa-line:hover {
      color: #06c755;
    }
    .product-image {
      width: 100%;
      height: 250px;
      object-fit: contain;
    }
    .pagination .page-item {
      border-right: 1px solid #ddd;
    }
    .pagination .page-item .page-link {
      border: none;
      border-right: 1px solid #ddd;
      border-radius: 0;
    }
    .pagination .page-item:last-of-type {
      border-right: none;
    }
    button {
      background-color: #e3f2fd;
      border-radius: 5px;
      border: 1px solid rgb(181, 206, 248);
      padding: 4px;
    }
    .tag {
      position: absolute;
      top: 1px;
      left: 40px;
      background-color: rgba(254, 213, 89, 0.915);
      color: white;
      padding: 20px 15px;
      font-size: 14px;
      font-weight: bold;
      border-radius: 50%;
      z-index: 1;
    }

    .quantity-container {
      display: flex;
      align-items: center;
    }

    .quantity-btn {
      background-color: #8ccdfc;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 20px;
    }

    .quantity-btn:hover {
      background-color: lightgray;
    }

    .quantity-input {
      width: 120px;
      text-align: center;
      border: 1px solid #ccc;
      padding: 5px;
      font-size: 16px;
    }

    .video-container {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .product-image {
      width: 100%;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .product-image:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease;
    }

    .product {
      overflow: hidden;
    }

    footer {
      background-image: url("../images/background-1.png");
      background-size: cover;
      background-position: center;
      color: rgb(102, 102, 102);
      font-weight: 20px;
      font-size: 18px;
      height: 300px;
    }
    .sidebar {
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 3;
        top: 0;
        right: 0;
        background-color: rgba(105, 108, 109, 0.818);
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 30px;
      }
      #cartItems {
        margin-top: 40px;
      }
      .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      .productQuantity {
        width: 50px;
        margin-left: 10px;
      }
      .productImage {
        width: 100px;
        height: auto;
        margin-right: 10px;
      }
      .close {
        position: absolute;
        top: 10px;
        right: 10px;
        border: none;
        background-color: transparent;
        cursor: pointer;
        font-size: 30px;
        color: #000;
      }
      #cartIcon {
        border: none;
        outline: none;
        background: transparent;
      }
      #cartCount {
        width: 20px;
        height: 20px;
        margin-bottom: 20px;
        border-radius: 50%;
        color: white;
        background-color: rgba(255, 0, 0, 0.841);
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .remove-button {
        background-color: transparent;
        border: none;
        cursor: pointer;
      }
      #loginButton {
        color: rgba(0, 0, 0, 0.611);
        border-color: lightgray;
      }
      #loginButton:hover {
        background-color: #afc6f3cb;
      }
  </style>
</head>
<script src="../data.js"></script>
<script src="../cartData.js"></script>

<body>
  <!-- nav 導覽列 -->
  <nav class="navbar navbar-primary sticky-top pt-0 pb-0" style="background-color: #e3f2fd">
    <div class="container">
      <a class="navbar-brand logo" href="../index.html">
        <img src="../images/Logo-removebg-preview.png" alt="Logo" width="85" height="85"
          class="d-inline-block align-text-center" />
        Funny桌遊
      </a>
      <div class="row w-50">
        <div class="col-12">
          <ul class="nav justify-content-center fs-5">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="../about.html">關於我們</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../product.html">全部產品</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../store.html">門市資訊</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../contact.html">聯絡我們</a>
            </li>
          </ul>
        </div>
      </div>
     
      <div class="social-icon ms-auto d-flex align-items-center">
        <!-- 錨點 anchor ID-->
        <a href="../login.html">
          <i id="userIcon" class="fa-solid fa-user"></i
        ></a>
        <button
            id="loginButton"
            type="button"
            onclick="window.location.href='../login.html'"
          >
            登入 / 註冊
          </button>
        <i
            id="CartButton"
            class="fa-solid fa-cart-shopping me-auto position: relative;"
          ></i>
          <span id="cartCount" class="cart-count">0</span>
      </div>
    </div>
  </nav>
  <!-- sidebar -->
    <div id="cartSidebar" class="sidebar">
      <div class="sidebar-content" style="color: white; padding: 20px">
        <button id="closeCartButton" class="close">
          <i class="fa-solid fa-xmark"></i>
        </button>
        <h2 class="fs-4">購物車</h2>
        <div id="cartItems">
          <!-- 顯示購物車商品 -->
        </div>
        <div class="row text-center">
          <div class="col-6">
            <div id="cartTotal" class="fs-5">
              <p>總價: <span id="totalPrice">0</span></p>
            </div>
          </div>
          <div class="col-6">
            <button
              id="checkoutButton"
              style="
                background-color: #2d5092e3;
                color: white;
                border: 0px;
                cursor: pointer;
                padding: 10px;
              "
            >
              前往結帳
            </button>
          </div>
        </div>
      </div>
    </div>
  <!-- products nav -->
  <nav class="navbar navbar-secondary navbar-expand-lg navbar-light pt-0">
    <div class="container justify-content-center">
      <ul class="nav nav-tabs ">
        <li class="nav-item">
          <a class="nav-link text-secondary" href="../product.html">全部商品</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-secondary" href="../new.html">最新上架</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-secondary" data-bs-toggle="dropdown" href="../product.html"
            role="button" aria-expanded="false">產品類型</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="../product.hot.html">熱門</a></li>
            <li><a class="dropdown-item" href="../product.party.html">派對</a></li>
            <li><a class="dropdown-item" href="../product.funny.html">休閒</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-secondary" data-bs-toggle="dropdown" href="../product.html"
            role="button" aria-expanded="false">適合對象</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="../people1.html">1~2人</a></li>
            <li><a class="dropdown-item" href="../people2.html">6人以上</a></li>
          </ul>
        </li>
      </ul>
    </div>
    </div>
  </nav>
  <!-- 麵包屑 -->
  <div class="container mt-3">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="../index.html" style="color: #0b3c9f">首頁</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">全部商品
        </li>
        <li id="product-name3" class="breadcrumb-item active" aria-current="page">
        </li>
      </ol>
    </nav>
  </div>
  </div>
  <hr />
  <!-- products -->

  <div class="container clearfix">
    <div class="row">
      <div class="col-6 pt-5">
        <div class="product text-center">
          <img id="product-image" src="" alt="" class="product-image" />
        </div>
      </div>
      <div class="col-6 pt-5">
        <h1 id="product-name2" class="fs-3 ms-3" style="color:#04549e"></h1>
        <ul id="product-description" class="mt-5 lh-lg text-black-50">
          
        </ul>
        <div class="mt-4 ms-3">
          <span id="product-price" class="product-price fw-bold fs-4"></span>
        </div>
        <!-- 數量按鈕 -->
        <div class="quantity-container ps-3 pt-4">
          <button onclick="decrease()" class="quantity-btn" id="decrease-btn">-</button>
          <input type="text" class="quantity-input" id="quantity" value="1">
          <button onclick="increase()" class="quantity-btn" id="increase-btn">+</button>
        </div>
        <button id="addToCartBtn" class="mybutton mt-4 mb-5 ms-3 p-2 pe-4 ps-4" data-product-id="01">加入購物車</button>
      </div>
      <hr>
      <h2 class="fs-5 text-danger fw-bold ms-5">產品介紹 :</h2>
      <p class="lh-lg ms-5 fw-bold" style="color:rgb(47, 76, 150)">
        <br>
        遊戲人數: 3-6人
        <br>
        適合年齡: 8歲以上
        <br>
        遊戲時間: 約30分
        <br>
        語言版本: 中文
      </p>
      <br>
      <br>
      <br>
      <p class="lh-lg ms-5" style="color:dimgray; letter-spacing: 0.1em;">
        屏氣凝神！插圖即將掀開了！這些插圖都圍繞著一個主題：一段令人費解的句子。但是，這段句子實際上是源於這五張插圖之一，到底是哪一張呢？
        <br>
        利用你的天賦及直覺來找到它，同時也要躲開其他玩家所設下的陷阱。
        <br>
        妙語說書人是一款令人感到驚奇、歡樂以及興奮的遊戲，適合讓全家以及朋友們一起享受、出人意料的歡樂派對遊戲。
        <br>
        遊戲配件：
        84張牌、1張嵌於盒內的計分板、6隻木製兔子、36個投票標記物、1份遊戲規則。
        <br>
        內含規則說明書（繁體、簡體中文）
        <br>
        適用牌套: 8*12.2cm (共約84張紙牌)
      </p>
    </div>
  </div>
  <div class="video-container pt-5 pb-5">
    <iframe id="yt" width="750" height="450" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
  </div>

  <script>
    
    document.addEventListener('DOMContentLoaded', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get('id');
      
      const product = products.find(p => p.id === productId);
      console.log("Product ID:", productId);

      if (product) {
        document.getElementById('product-image').src = product.image;
        document.getElementById('product-image').alt = product.name;
        document.getElementById('product-name2').textContent = product.name;
        document.getElementById('product-price').textContent = `$${product.price}`;
        document.getElementById('yt').src = product.youtube;
        document.getElementById('product-name3').textContent = product.name;
    
        const descriptionList = document.getElementById('product-description');
        product.description.forEach(desc => {
          const listItem = document.createElement('li');
          listItem.textContent = desc;
          descriptionList.appendChild(listItem);
        });
      } else {
        document.getElementById('product-name').textContent = "產品未找到";
      }
    });

    //   購物車數量增減
    function decrease() {
      var quantity = document.getElementById("quantity");
      if (quantity.value > 1) {
        quantity.value--;
      }
    }

    function increase() {
      var quantity = document.getElementById("quantity");
      quantity.value++;
    }
      // 商品加入購物車按鈕後顯示已加入購物車
    var addToCartBtn = document.getElementById("addToCartBtn");

    // 添加點擊事件監聽器
    addToCartBtn.addEventListener("click", function() {
      alert("已加入購物車！");
    });
  </script>

<script>
  let cart = [];
  
  // 顯示購物車視窗
  function showCartSidebar() {
    document.getElementById("cartSidebar").style.width = "400px";
  }

  // 隱藏購物車視窗
  function hideCartSidebar() {
    document.getElementById("cartSidebar").style.width = "0";
  }

  // 更新購物車圖示上的數量顯示
  function updateCartIcon() {
    const cartCountElement = document.getElementById("cartCount");
    const totalItems = cart.reduce((acc, item) => acc + item.quantity, 0);
    cartCountElement.textContent = totalItems;
  }

  // 添加商品到購物車
  function addToCart(productId) {
    const product = cartData.find((p) => p.id === productId);
    // 檢查商品是否已在購物車中
    if (product) {
      const cartItem = cart.find((item) => item.id === productId);
      if (cartItem) {
        cartItem.quantity += 1;
      } else {
        cart.push({ ...product, quantity: 1 });
      }

      updateCartIcon();
      displayCartItems();
      localStorage.setItem("cart", JSON.stringify(cart));
    }
  }

  // 顯示購物車項目
  function displayCartItems() {
    const cartItemsContainer = document.getElementById("cartItems");
    // 清空現有項目
    cartItemsContainer.innerHTML = "";
    let totalPrice = 0;

    cart.forEach((item) => {
      const itemElement = document.createElement("div");
      itemElement.classList.add("cart-item");
      itemElement.innerHTML = `
        <img src="${item.image}" alt="${item.name}" class="productImage">
        <p>${item.name}</p>
        <input type="number" value="${
          item.quantity
        }" min="1" class="productQuantity" data-id="${item.id}">
        <p>$${(item.price * item.quantity).toFixed(0)}</p>
        <button class="remove-button" data-id="${
          item.id
        }"><i class="fa-solid fa-trash-can"></i></button>
    `;
      cartItemsContainer.appendChild(itemElement);
      // 計算總價
      totalPrice += item.price * item.quantity;
    });
    // 顯示總價
    const totalPriceElement = document.getElementById("totalPrice");
    totalPriceElement.textContent = `$${totalPrice.toFixed(0)}`;
    // 添加事件監聽器到數量輸入框
    const quantityInputs = document.querySelectorAll(".productQuantity");
    quantityInputs.forEach((input) => {
      input.addEventListener("change", function () {
        updateQuantity(
          this.dataset.id,
          this.value -
            cart.find((item) => item.id === this.dataset.id).quantity
        );
      });
    });
    // 添加事件監聽器到移除按鈕
    const removeButtons = document.querySelectorAll(".remove-button");
    removeButtons.forEach((button) => {
      button.addEventListener("click", function () {
        removeFromCart(this.dataset.id);
      });
    });
  }

  // 更新商品數量
  function updateQuantity(id, change) {
    const item = cart.find((product) => product.id === id);
    if (item) {
      item.quantity += parseInt(change);
      if (item.quantity < 1) {
        removeFromCart(id);
      } else {
        displayCartItems();
        localStorage.setItem("cart", JSON.stringify(cart));
      }
    }
  }

  // 從購物車中移除商品
  function removeFromCart(id) {
    cart = cart.filter((item) => item.id !== id);
    displayCartItems();
    localStorage.setItem("cart", JSON.stringify(cart));
  }

  // 在其他頁面加載時從本地存儲中加載購物車資料
  window.addEventListener("load", function () {
    const savedCart = localStorage.getItem("cart");
    if (savedCart) {
      cart = JSON.parse(savedCart);
      updateCartIcon();
      displayCartItems();
    }
  });
  // 點擊購物車icon顯示側邊欄
  document.getElementById("CartButton").onclick = function () {
    showCartSidebar();
  };
  // 關閉購物車按鈕後隱藏
  document.getElementById("closeCartButton").onclick = function () {
    hideCartSidebar();
  };

  document.getElementById("checkoutButton").onclick = function () {
    hideCartSidebar();
    alert("感謝購買！");
    cart = [];
    localStorage.removeItem("cart"); // 在結帳時清空本地存儲中的購物車資料
    displayCartItems();
    updateCartIcon();
  };
</script>
  <!-- footer -->
  <footer>
    <div class="footer-logo text-center pt-4" style="
          color: rgb(8, 57, 149);
          font-weight: 800;
          font-size: 1.5rem;
          background-image: url(../images/background-1.png);
        ">
      <img src="../images/Logo-removebg-preview.png" alt="Logo" width="80" height="80" />
      Funny桌遊
    </div>
    <p class="text-center pt-4">
      <span>【聯絡方式】電話:0988-000-111
        <br />
        【上班時間】平日10:00~12:00、14:00~18:00
      </span>
    </p>
    <div class="footer-social-icon text-center pt-4 pb-3">
      <!-- 錨點 anchor ID-->
      <i class="fa-brands fa-instagram"></i>
      <i class="fa-brands fa-facebook"></i>
      <i class="fa-brands fa-youtube"></i>
      <i class="fa-brands fa-line"></i>
    </div>
    <div class="copyright text-center fs-6">2024陳伊宣期中專題©</div>
  </footer>

</body>

</html>